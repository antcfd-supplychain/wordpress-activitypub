import{getConfig as e,getContext as r,store as t}from"@wordpress/interactivity";const{apiFetch:a,url:o}=window.wp,{actions:s}=t("activitypub/followers",{state:{get paginationText(){const{page:e,pages:t}=r();return`${e} / ${t}`},get disablePreviousLink(){const{page:e}=r();return e<=1},get disableNextLink(){const{page:e,pages:t}=r();return e>=t}},actions:{async fetchFollowers(){const t=r(),{userId:s,page:n,per_page:l,order:c}=t;t.isLoading=!0;try{const{namespace:r}=e(),i=o.addQueryArgs(`/${r}/actors/${s}/followers`,{context:"full",per_page:l,order:c,page:n}),{orderedItems:g,totalItems:p}=await a({path:i});t.followers=g.map(e=>({handle:"@"+e.preferredUsername,icon:e.icon,name:e.name||e.preferredUsername,url:e.url||e.id})),t.total=p,t.pages=Math.ceil(p/l)}catch(e){console.error("Error fetching followers:",e)}finally{t.isLoading=!1}},previousPage(e){e.preventDefault();const t=r();t.page>1&&(t.page--,s.fetchFollowers().catch(e=>{console.error("Error fetching followers:",e)}))},nextPage(e){e.preventDefault();const t=r();t.page<t.pages&&(t.page++,s.fetchFollowers().catch(e=>{console.error("Error fetching followers:",e)}))}},callbacks:{setDefaultAvatar(r){r.target.src=e().defaultAvatarUrl}}});